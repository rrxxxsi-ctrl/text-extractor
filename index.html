<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f172a">
    <meta name="description" content="مكتب بدر الحقيل - المستقبل للعقارات">
    <title>مكتب بدر الحقيل | النسخة النووية</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@300;400;600;800;900&family=El+Messiri:wght@400;700&family=Tajawal:wght@300;400;500;700;900&family=Almarai:wght@300;400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- 1. المحرك الجمالي (Variables) --- */
        :root {
            --bg-dark: #0f172a;
            --bg-light: #f8fafc;
            --glass-dark: rgba(30, 41, 59, 0.7);
            --glass-light: rgba(255, 255, 255, 0.8);
            --neon-blue: #3b82f6;
            --neon-gold: #f59e0b;
            --font-cairo: 'Cairo', sans-serif;
            --font-tajawal: 'Tajawal', sans-serif;
            --font-amiri: 'Amiri', serif;
            --font-messiri: 'El Messiri', sans-serif;
            --font-almarai: 'Almarai', sans-serif;
        }

        /* --- 2. الأساسيات المتقدمة --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: var(--font-cairo);
            background-color: var(--bg-dark);
            color: #fff;
            min-height: 100vh;
            padding-bottom: 180px;
            overflow-x: hidden;
            transition: 0.6s cubic-bezier(0.22, 1, 0.36, 1);
            cursor: default;
            user-select: none; /* منع التحديد العشوائي */
        }

        /* شريط التقدم العلوي */
        #scroll-progress {
            position: fixed; top: 0; left: 0; height: 3px; background: linear-gradient(90deg, var(--neon-blue), var(--neon-gold));
            width: 0%; z-index: 1000; transition: width 0.1s;
        }

        /* تخصيص التحديد */
        ::selection { background: var(--neon-gold); color: black; }

        /* الوضع النهاري */
        body.light-mode {
            background-color: var(--bg-light);
            color: #0f172a;
        }

        /* --- 3. الخلفية الحية (Animated Gradient Mesh) --- */
        .ambient-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;
            background: radial-gradient(at 0% 0%, rgba(59,130,246,0.15) 0, transparent 50%), 
                        radial-gradient(at 100% 100%, rgba(245,158,11,0.1) 0, transparent 50%);
            animation: breatheBg 10s infinite alternate;
        }
        @keyframes breatheBg { 0% { opacity: 0.5; transform: scale(1); } 100% { opacity: 1; transform: scale(1.1); } }

        /* --- 4. شريط أدوات عائم (Floating Toolbar) --- */
        .toolbar {
            position: fixed; top: 20px; right: 20px; z-index: 100;
            display: flex; flex-direction: column; gap: 10px;
            background: rgba(255,255,255,0.05); padding: 10px; border-radius: 50px;
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1);
            transition: 0.3s;
        }
        html[dir="ltr"] .toolbar { left: 20px; right: auto; }
        
        body.light-mode .toolbar { background: rgba(0,0,0,0.05); border-color: rgba(0,0,0,0.1); }

        .tool-btn {
            width: 40px; height: 40px; border-radius: 50%; border: none;
            background: transparent; color: inherit; font-size: 1.1rem;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.3s; position: relative;
        }
        .tool-btn:hover { background: rgba(255,255,255,0.1); transform: scale(1.1) rotate(10deg); color: var(--neon-blue); }
        .tool-btn::after {
            content: attr(data-tooltip);
            position: absolute; right: 50px; background: #333; color: #fff;
            padding: 4px 8px; border-radius: 5px; font-size: 0.7rem;
            opacity: 0; pointer-events: none; transition: 0.3s; white-space: nowrap;
        }
        html[dir="ltr"] .tool-btn::after { left: 50px; right: auto; }
        .tool-btn:hover::after { opacity: 1; right: 60px; }
        html[dir="ltr"] .tool-btn:hover::after { left: 60px; }

        /* --- 5. الهيدر والتايبوجرافي --- */
        header { text-align: center; padding: 80px 20px 40px; position: relative; }
        
        .logo-3d {
            font-size: 3.5rem; display: inline-block; margin-bottom: 20px;
            background: linear-gradient(135deg, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: floatLogo 6s infinite ease-in-out;
            cursor: pointer; transition: 0.5s;
        }
        .logo-3d:hover { transform: rotateY(180deg); }
        body.light-mode .logo-3d { background: linear-gradient(135deg, #1e293b, #475569); -webkit-background-clip: text; }

        .live-typing {
            font-size: clamp(1.5rem, 4vw, 3rem); font-weight: 900; min-height: 1.5em;
            background: linear-gradient(to right, var(--neon-blue), var(--neon-gold));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        
        .stats-wrapper {
            display: flex; justify-content: center; gap: 40px; margin-top: 30px;
        }
        .stat-box { text-align: center; position: relative; }
        .stat-number { font-size: 2rem; font-weight: 800; color: var(--neon-blue); }
        .stat-label { font-size: 0.9rem; opacity: 0.7; }

        /* --- 6. نظام البطاقات الزجاجي (Glassmorphism 2.0) --- */
        .cards-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px; max-width: 1200px; margin: 0 auto; padding: 0 20px;
        }

        .path-container {
            background: var(--glass-dark); border-radius: 30px; padding: 25px;
            border: 1px solid rgba(255,255,255,0.08); position: relative; overflow: hidden;
            transition: 0.4s;
        }
        body.light-mode .path-container { background: var(--glass-light); border-color: rgba(0,0,0,0.05); box-shadow: 0 10px 30px rgba(0,0,0,0.05); }

        .path-title {
            font-size: 1.5rem; font-weight: 800; text-align: center; margin-bottom: 25px;
            padding: 15px; border-radius: 20px; color: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2); position: relative; overflow: hidden;
        }
        .path-title::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shine 3s infinite;
        }
        @keyframes shine { 0% { left: -100%; } 20% { left: 200%; } 100% { left: 200%; } }

        .res-title { background: linear-gradient(135deg, #1d4ed8, #2563eb); }
        .com-title { background: linear-gradient(135deg, #b45309, #d97706); }

        /* كروت الخطوات */
        .step-item {
            display: flex; align-items: center; gap: 15px; padding: 15px;
            margin-bottom: 15px; border-radius: 18px;
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            transition: 0.3s; transform-origin: center;
        }
        .step-item:hover {
            background: rgba(255,255,255,0.08); transform: scale(1.03) translateX(-5px);
            border-color: rgba(255,255,255,0.2); box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        body.light-mode .step-item:hover { background: white; }

        .step-icon {
            width: 45px; height: 45px; border-radius: 12px; display: flex;
            align-items: center; justify-content: center; font-size: 1.2rem; flex-shrink: 0;
        }
        .res-icon { background: rgba(59,130,246,0.15); color: #60a5fa; }
        .com-icon { background: rgba(245,158,11,0.15); color: #fbbf24; }

        /* --- 7. البار السفلي الذكي (Smart Dock) --- */
        .dock-float {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(20px);
            padding: 10px 20px; border-radius: 60px; border: 1px solid rgba(255,255,255,0.15);
            display: flex; align-items: center; gap: 15px; z-index: 500;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            transition: 0.3s;
        }
        body.light-mode .dock-float { background: rgba(255,255,255,0.95); border-color: rgba(0,0,0,0.1); }

        .dock-icon {
            width: 55px; height: 55px; border-radius: 50%; display: flex;
            align-items: center; justify-content: center; font-size: 1.5rem; color: white;
            text-decoration: none; transition: 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            position: relative;
        }
        .dock-icon:hover { transform: translateY(-15px) scale(1.2); }
        .dock-icon::after { /* نقطة اشعار */
            content: ''; position: absolute; bottom: -5px; left: 50%; transform: translateX(-50%);
            width: 5px; height: 5px; border-radius: 50%; background: white; opacity: 0; transition: 0.3s;
        }
        .dock-icon:hover::after { opacity: 1; bottom: 5px; }

        .btn-call { background: linear-gradient(135deg, #10b981, #059669); }
        .btn-map { background: linear-gradient(135deg, #3b82f6, #1d4ed8); }
        .btn-wa { background: #25D366; }
        .btn-share { background: #64748b; }

        /* --- 8. الإشعارات (Toast) --- */
        .toast-box {
            position: fixed; top: 30px; left: 50%; transform: translateX(-50%) translateY(-100px);
            background: rgba(16, 185, 129, 0.9); color: white; padding: 12px 30px;
            border-radius: 50px; font-weight: bold; backdrop-filter: blur(5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); transition: 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            z-index: 1000; opacity: 0; display: flex; align-items: center; gap: 10px;
        }
        .toast-box.show { transform: translateX(-50%) translateY(0); opacity: 1; }

        /* --- 9. حالة عدم الاتصال (Offline) --- */
        .offline-banner {
            position: fixed; top: 0; left: 0; width: 100%; background: #ef4444; color: white;
            text-align: center; padding: 5px; font-size: 0.8rem; transform: translateY(-100%); transition: 0.3s; z-index: 2000;
        }
        .offline-banner.show { transform: translateY(0); }

        /* --- 10. أنيميشن الظهور --- */
        .fade-up { animation: fadeUp 0.8s forwards; opacity: 0; transform: translateY(30px); }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <div class="ambient-bg"></div>
    <div id="scroll-progress"></div>

    <div class="offline-banner" id="offline-msg">⚠️ لا يوجد اتصال بالإنترنت</div>

    <div class="toast-box" id="toast">
        <i class="fa-solid fa-check-circle"></i>
        <span id="toast-text">تمت العملية بنجاح</span>
    </div>

    <div class="toolbar">
        <button class="tool-btn" onclick="toggleTheme()" data-tooltip="المظهر">
            <i class="fa-regular fa-sun" id="theme-icon"></i>
        </button>
        <button class="tool-btn" onclick="toggleLang()" data-tooltip="اللغة">
            <i class="fa-solid fa-language"></i>
        </button>
        <button class="tool-btn" onclick="changeFont()" data-tooltip="الخط">
            <i class="fa-solid fa-font"></i>
        </button>
        <button class="tool-btn" onclick="toggleFullScreen()" data-tooltip="ملء الشاشة">
            <i class="fa-solid fa-expand"></i>
        </button>
    </div>

    <header class="fade-up" style="animation-delay: 0.1s;">
        <i class="fa-solid fa-building-columns logo-3d text-blue-500"></i>
        <h1 class="text-4xl font-bold mb-2">مكتب بدر الحقيل</h1>
        <div class="live-typing" id="typing-text"></div>
        
        <div class="stats-wrapper">
            <div class="stat-box">
                <div class="stat-number" data-target="15">+0</div>
                <div class="stat-label" data-i18n="exp">سنة خبرة</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" data-target="500">+0</div>
                <div class="stat-label" data-i18n="clients">مشروع ناجح</div>
            </div>
        </div>
    </header>

    <div class="cards-grid">
        
        <div class="path-container fade-up" style="animation-delay: 0.3s;">
            <div class="path-title res-title" data-i18n="res_title">
                <i class="fa-solid fa-house-chimney ml-2"></i> المسار السكني
            </div>
            <div id="res-list"></div> </div>

        <div class="path-container fade-up" style="animation-delay: 0.5s;">
            <div class="path-title com-title" data-i18n="com_title">
                <i class="fa-solid fa-city ml-2"></i> المسار التجاري
            </div>
            <div id="com-list"></div> </div>

    </div>

    <div class="dock-float fade-up" style="animation-delay: 0.8s;">
        <a href="tel:0569982526" class="dock-icon btn-call" oncontextmenu="copyText('0569982526', event)">
            <i class="fa-solid fa-phone"></i>
        </a>
        <a href="https://wa.me/966569982526" target="_blank" class="dock-icon btn-wa">
            <i class="fa-brands fa-whatsapp"></i>
        </a>
        <a href="#" onclick="openMap(event)" class="dock-icon btn-map">
            <i class="fa-solid fa-location-dot"></i>
        </a>
        <button onclick="sharePage()" class="dock-icon btn-share">
            <i class="fa-solid fa-share-nodes"></i>
        </button>
    </div>

    <footer class="text-center mt-12 text-slate-500 text-sm">
        &copy; <span id="year"></span> <span data-i18n="footer">مكتب بدر الحقيل للعقارات</span>
    </footer>

    <script>
        /* --- بيانات الموقع (Database) --- */
        const content = {
            ar: {
                res_title: "المسار السكني", com_title: "المسار التجاري",
                exp: "سنة خبرة", clients: "مشروع ناجح", footer: "مكتب بدر الحقيل للعقارات",
                typing: ["للعقارات والهندسة", "تصحيح وضع المباني", "خدمات معتمدة"],
                steps_res: [
                    {t:"رفع المقاسات", d:"معاينة دقيقة", i:"fa-tape"},
                    {t:"مخطط الوضع القائم", d:"رسم هندسي", i:"fa-compass-drafting"},
                    {t:"إنشاء مخطط مقترح", d:"تعديلات معمارية", i:"fa-pen-ruler"},
                    {t:"تقرير فني", d:"معتمد وشامل", i:"fa-file-contract"},
                    {t:"إرسال للبلدية", d:"متابعة حتى الاعتماد", i:"fa-paper-plane"}
                ],
                steps_com: [
                    {t:"رفع المقاسات", d:"مطابقة للواقع", i:"fa-ruler-combined"},
                    {t:"مخطط الوضع القائم", d:"رسم تفصيلي", i:"fa-layer-group"},
                    {t:"مخطط مقترح", d:"تعديلات تجارية", i:"fa-wand-magic-sparkles"},
                    {t:"تقرير فني", d:"السلامة الإنشائية", i:"fa-clipboard-check"},
                    {t:"واجهة 3D", d:"تصميم عصري", i:"fa-cube"},
                    {t:"إرسال للأمانة", d:"متابعة شاملة", i:"fa-building-columns"}
                ]
            },
            en: {
                res_title: "Residential Path", com_title: "Commercial Path",
                exp: "Years Exp.", clients: "Projects", footer: "Bader Al Huqail Real Estate",
                typing: ["Real Estate & Eng.", "Building Correction", "Certified Services"],
                steps_res: [
                    {t:"Measurements", d:"On-site check", i:"fa-tape"},
                    {t:"As-Built Plan", d:"Current status", i:"fa-compass-drafting"},
                    {t:"Proposal Plan", d:"Modifications", i:"fa-pen-ruler"},
                    {t:"Technical Report", d:"Certified", i:"fa-file-contract"},
                    {t:"Submission", d:"Municipality", i:"fa-paper-plane"}
                ],
                steps_com: [
                    {t:"Measurements", d:"Exact match", i:"fa-ruler-combined"},
                    {t:"As-Built Plan", d:"Detailed", i:"fa-layer-group"},
                    {t:"Proposal Plan", d:"Commercial edits", i:"fa-wand-magic-sparkles"},
                    {t:"Technical Report", d:"Safety proof", i:"fa-clipboard-check"},
                    {t:"3D Facade", d:"Modern design", i:"fa-cube"},
                    {t:"Submission", d:"Follow-up", i:"fa-building-columns"}
                ]
            }
        };

        let lang = localStorage.getItem('lang') || 'ar';
        
        /* --- 1. الكتابة التلقائية (Typewriter) --- */
        let typeIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        function typeEffect() {
            const currentText = content[lang].typing[typeIndex];
            const typeElement = document.getElementById('typing-text');
            
            if (isDeleting) {
                typeElement.textContent = currentText.substring(0, charIndex--);
            } else {
                typeElement.textContent = currentText.substring(0, charIndex++);
            }

            let speed = isDeleting ? 50 : 100;
            if (!isDeleting && charIndex === currentText.length) {
                speed = 2000; isDeleting = true;
            } else if (isDeleting && charIndex === 0) {
                isDeleting = false; typeIndex = (typeIndex + 1) % content[lang].typing.length;
            }
            setTimeout(typeEffect, speed);
        }

        /* --- 2. العدادات الرقمية (Counters) --- */
        function startCounters() {
            const counters = document.querySelectorAll('.stat-number');
            counters.forEach(counter => {
                const target = +counter.getAttribute('data-target');
                const increment = target / 50;
                const updateCount = () => {
                    const c = +counter.innerText.replace('+','');
                    if (c < target) {
                        counter.innerText = '+' + Math.ceil(c + increment);
                        setTimeout(updateCount, 40);
                    } else {
                        counter.innerText = '+' + target;
                    }
                };
                updateCount();
            });
        }

        /* --- 3. بناء المحتوى (Rendering) --- */
        function render() {
            const d = content[lang];
            
            // النصوص الثابتة
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(d[key]) el.innerText = d[key];
            });

            // بناء القوائم
            const buildList = (items, containerId, iconClass) => {
                const container = document.getElementById(containerId);
                container.innerHTML = items.map(item => `
                    <div class="step-item">
                        <div class="step-icon ${iconClass}">
                            <i class="fa-solid ${item.i}"></i>
                        </div>
                        <div>
                            <div class="font-bold text-lg">${item.t}</div>
                            <div class="text-sm opacity-70">${item.d}</div>
                        </div>
                    </div>
                `).join('');
            };

            buildList(d.steps_res, 'res-list', 'res-icon');
            buildList(d.steps_com, 'com-list', 'com-icon');
        }

        /* --- 4. الوظائف التفاعلية --- */
        function toggleLang() {
            lang = lang === 'ar' ? 'en' : 'ar';
            localStorage.setItem('lang', lang);
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            re
