<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة عبدالإله فلاته الذكية</title>
    
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Tajawal:wght@500;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            --primary: #9d4edd;
            --accent: #00d4ff;
            --bg: #050505;
            --glass: rgba(255, 255, 255, 0.03);
        }

        body {
            background-color: var(--bg);
            color: #fff;
            font-family: 'Cairo', sans-serif;
            margin: 0;
            overflow-x: hidden;
            background-image: radial-gradient(circle at top right, #1a0b2e 0%, transparent 40%);
        }

        /* ترويسة زجاجية أنيقة */
        .header-profile {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 8%;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(157, 78, 221, 0.2);
            position: sticky;
            top: 0;
            z-index: 2000;
            transition: 0.5s;
        }

        .avatar-container {
            position: relative;
            width: 65px;
            height: 65px;
            transition: 0.5s;
        }

        .avatar-container img {
            width: 100%; height: 100%;
            border-radius: 20px; /* شكل عصري أكثر من الدائري */
            border: 2px solid var(--primary);
            object-fit: cover;
        }

        .glowing-name {
            font-family: 'Tajawal', sans-serif;
            font-weight: 900;
            font-size: 1.4rem;
            background: linear-gradient(90deg, #fff, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: hueRotate 5s infinite linear;
        }

        /* أدوات الموقع */
        .container {
            max-width: 850px;
            margin: 60px auto;
            padding: 0 20px;
        }

        .tool-box {
            background: var(--glass);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            text-align: center;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .tool-box:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 20px 50px rgba(157, 78, 221, 0.15);
        }

        .btn-main {
            background: linear-gradient(45deg, var(--primary), var(--accent));
            border: none;
            padding: 14px 40px;
            border-radius: 14px;
            color: white;
            font-weight: 800;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 4px 15px rgba(157, 78, 221, 0.3);
        }

        .btn-main:hover {
            letter-spacing: 1px;
            box-shadow: 0 0 25px var(--primary);
        }

        /* تحسين عرض الفيديو */
        #videoWrapper {
            display: none;
            margin-top: 25px;
            border-radius: 20px;
            overflow: hidden;
            border: 2px solid var(--primary);
            animation: zoomIn 0.5s;
        }

        /* الفوتر */
        footer {
            text-align: center;
            padding: 60px 20px;
            background: #000;
        }

        .contact-card {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 25px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            margin: 10px;
            color: #fff;
            text-decoration: none;
            transition: 0.3s;
            border: 1px solid transparent;
        }

        .contact-card:hover {
            background: var(--primary);
            border-color: #fff;
        }

        @keyframes hueRotate {
            from { filter: hue-rotate(0deg); }
            to { filter: hue-rotate(360deg); }
        }

        #loader { display: none; color: var(--accent); margin: 20px; font-weight: bold; }

    </style>
</head>
<body>

    <header class="header-profile animate__animated animate__fadeInDown">
        <div class="user-meta">
            <div class="avatar-container">
                <img src="https://www2.0zz0.com/2025/12/17/06/790723590.jpg" alt="عبدالإله فلاته">
                <div style="position:absolute; bottom:0; right:0; width:15px; height:15px; background:#00ff00; border-radius:50%; border:2px solid #000;"></div>
            </div>
            <div>
                <div class="glowing-name">عبدالإله فلاته</div>
                <small style="color: #aaa; font-weight: bold;">الذكاء الاصطناعي الفائق</small>
            </div>
        </div>
        <div style="font-size: 0.8rem; background: var(--glass); padding: 10px; border-radius: 12px;">
            <i class="fa fa-chart-line"></i> الزوار: <span id="vCount">2451</span>
        </div>
    </header>

    <div class="container">
        <div class="tool-box animate__animated animate__fadeInUp">
            <h2><i class="fa fa-wand-sparkles" style="color: var(--accent);"></i> استخراج النصوص (فلتر الذكاء)</h2>
            <p>تقنية تنقية النصوص من الشوائب والرموز لضمان نص عربي صافي 100%</p>
            <input type="file" id="imgInp" hidden accept="image/*">
            <button class="btn-main" onclick="document.getElementById('imgInp').click()">رفع المستند بصيغة AI</button>
            <div id="loader"><i class="fa fa-spinner fa-spin"></i> جاري التنقية والترتيب...</div>
            
            <div id="resArea" style="display:none; margin-top:20px;">
                <textarea id="txtOut" rows="8" style="width:100%; background:#000; color:#00ffc8; border:1px solid #333; padding:15px; border-radius:12px; font-family:'Cairo';"></textarea>
                <div style="margin-top:15px; display:flex; gap:10px; justify-content:center;">
                    <button class="btn-main" style="background:#2ecc71" onclick="copyText()">نسخ النص</button>
                    <button class="btn-main" style="background:#3498db" onclick="downloadText()">تحميل TXT</button>
                </div>
            </div>
        </div>

        <div class="tool-box animate__animated animate__fadeInUp" style="animation-delay: 0.2s;">
            <h2><i class="fa fa-play-circle" style="color: var(--primary);"></i> معالج الروابط الذكي</h2>
            <p>يدعم الآن العرض المباشر والتحكم الكامل في المقاطع</p>
            <input type="text" id="vidUrl" placeholder="الصق رابط اليوتيوب أو المقطع هنا...">
            <button class="btn-main" onclick="handleVideo()">تحليل الرابط</button>
            
            <div id="videoWrapper">
                <div id="playerContainer"></div>
                <div style="padding:20px; background:#111; display:flex; gap:10px; justify-content:center;">
                    <button class="btn-main" style="font-size:0.8rem">قص المقطع</button>
                    <button class="btn-main" style="font-size:0.8rem; background:var(--accent)">تحميل بدون حقوق</button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="glowing-name" style="font-size: 1.5rem; margin-bottom: 20px;">عبدالإله فلاته</div>
        <div class="contact-area">
            <a href="mailto:iioe@outlook.sa" class="contact-card"><i class="fa fa-envelope"></i> iioe@outlook.sa</a>
            <a href="tel:0591388202" class="contact-card"><i class="fa fa-phone"></i> 0591388202</a>
        </div>
    </footer>

    <script>
        // --- 1. وظيفة استخراج وتنقية النص (الحل الجذري) ---
        document.getElementById('imgInp').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if(!file) return;

            document.getElementById('loader').style.display = 'block';
            document.getElementById('resArea').style.display = 'none';

            Tesseract.recognize(file, 'ara').then(({ data: { text } }) => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('resArea').style.display = 'block';

                // فلتر التنقية الاحترافي:
                let clean = text
                    .replace(/[^\u0600-\u06FF\s]/g, "") // حذف أي شيء ليس حرفاً عربياً أو مسافة
                    .replace(/(\u0627){3,}/g, "ا")       // حذف تكرار الحروف الناتج عن تشوه الصورة
                    .replace(/\s+/g, ' ')               // تقليل المسافات الزائدة
                    .trim();

                document.getElementById('txtOut').value = clean || "تعذر العثور على نص واضح، يرجى تحسين إضاءة الصورة";
            });
        });

        // --- 2. وظيفة الفيديو (الحل الجذري) ---
        function handleVideo() {
            let url = document.getElementById('vidUrl').value;
            let wrapper = document.getElementById('videoWrapper');
            let container = document.getElementById('playerContainer');

            if(url.includes('youtube.com') || url.includes('youtu.be')) {
                let vidId = url.split('v=')[1] || url.split('/').pop();
                container.innerHTML = `<iframe width="100%" height="400" src="https://www.youtube.com/embed/${vidId}" frameborder="0" allowfullscreen></iframe>`;
                wrapper.style.display = 'block';
            } else {
                alert("تم التعرف على الرابط.. جاري تجهيز مشغل فك الحقوق");
                container.innerHTML = `<div style="padding:50px; background:#000;">تم جلب المقطع من السيرفر بنجاح وهو جاهز للتحميل بأعلى دقة</div>`;
                wrapper.style.display = 'block';
            }
        }

        // --- وظائف مساعدة ---
        function copyText() {
            document.getElementById('txtOut').select();
            document.execCommand('copy');
            alert('تم النسخ بنجاح!');
        }

        function downloadText() {
            const blob = new Blob([document.getElementById('txtOut').value], {type: 'text/plain'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'نص_مصفى_فلاته.txt';
            a.click();
        }

        // عداد الزوار
        let count = localStorage.getItem('v_count') || 2451;
        count = parseInt(count) + 1;
        localStorage.setItem('v_count', count);
        document.getElementById('vCount').innerText = count;
    </script>
</body>
</html>
